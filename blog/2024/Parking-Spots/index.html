<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="Yay1z8_4Pcbtvupx_meFC_DwThQdehBrP5tZBKKkT0c"> <meta name="msvalidate.01" content=""> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>The Number of Wasted Parking Spaces Caused by Random Parking | Maxime Wolf</title> <meta name="author" content="Maxime Wolf"> <meta name="description" content="Estimating the number of wasted parking spaces caused by random parking."> <meta name="keywords" content="maximewolf, maxime-wolf, blog, data-science, AI, engineering, portfolio, projects"> <meta property="og:site_name" content="Maxime Wolf"> <meta property="og:type" content="website"> <meta property="og:title" content="Maxime Wolf | The Number of Wasted Parking Spaces Caused by Random Parking"> <meta property="og:url" content="https://www.maximewolf.com//blog/2024/Parking-Spots/"> <meta property="og:description" content="Estimating the number of wasted parking spaces caused by random parking."> <meta property="og:locale" content="en"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="The Number of Wasted Parking Spaces Caused by Random Parking"> <meta name="twitter:description" content="Estimating the number of wasted parking spaces caused by random parking."> <script type="application/ld+json">
      {
        "author":
        {
          "@type": "Person",
          "name": "Maxime  Wolf"
        },
        "url": "https://www.maximewolf.com//blog/2024/Parking-Spots/",
        "@type": "WebSite",
        "description": "Estimating the number of wasted parking spaces caused by random parking.",
        "headline": "The Number of Wasted Parking Spaces Caused by Random Parking",
        "sameAs": ["https://github.com/maxime7770", "https://www.linkedin.com/in/maxime-wolf", "https://medium.com/@maxwolf34", "https://www.kaggle.com/maxime77", "https://leetcode.com/u/maxwolf34"],
        "name": "Maxime  Wolf",
        "@context": "https://schema.org"
      }
    </script> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&amp;family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&amp;family=Source+Sans+Pro:wght@300;400;600&amp;family=Playfair+Display:ital,wght@0,400;0,700;1,400&amp;family=JetBrains+Mono:wght@300;400;500&amp;family=Fira+Code:wght@300;400;500&amp;display=swap"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/memo.png"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://www.maximewolf.com//blog/2024/Parking-Spots/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Maxime Wolf</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/assets/pdf/Resume_Wolf_Maxime.pdf">CV</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">The Number of Wasted Parking Spaces Caused by Random Parking</h1> <p class="post-meta">September 29, 2024</p> <p class="post-tags"> <a href="/blog/2024"> <i class="fas fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/category/math"> <i class="fas fa-tag fa-sm"></i> math</a>   </p> </header> <article class="post-content"> <p>Imagine a long parking lot with \(n\) parking spots arranged in a row, where each car occupies two adjacent spots. The cars arrive and park at random, choosing a pair of adjacent spots without any coordination. As more cars park, some spaces inevitably become isolated, making it impossible to park any more cars. This random process leaves a portion of the parking spots unusable, even though they are technically unoccupied.</p> <p>In this blog, we will explore how the number of free spots, \(X_n\) , behaves as the number of parking spots \(n\) grows, and estimate the inefficiency compared to an optimal parking strategy.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/blog_parking/gif1.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/blog_parking/gif1.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/blog_parking/gif1.gif-1400.webp"></source> <img src="/assets/img/blog_parking/gif1.gif" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="parking animation" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Animation of the parking process (3 spots are unusable) </div> <p>Let’s call \(I_{n, k}\) the event: “the first car parks in spot \(k\)” (hence occupying spots \(k\) and \(k+1\)).</p> <p>Since the first car parks at exactly one spot, we can write:</p> \[1 = \sum_{k=1}^{n-1} \mathbf{1}_{I_{n, k}}\] <p>and</p> \[X_n = \sum_{k=1}^{n-1} X_n \mathbf{1}_{I_{n, k}}\] <p>The goal of this article is to study the behavior of \(u_n = \mathbb{E}[X_n]\) as \(n\) grows.</p> \[\begin{align*} \mathbb{E}[X_n] &amp;= \sum_{k=1}^{n-1} \mathbb{E}[X_n \mathbf{1}_{I_{n, k}}] \\ &amp;= \sum_{k=1}^{n-1} \sum_{j=1}^{n-1} j \mathbb{P}(X_n \mathbf{1}_{I_{n, k}} =j) \\ \end{align*}\] <p>Since \(\{X_n \mathbf{1}_{I_{n, k}} = j\} = \{X_n =j\} \cap I_{n, k}\), we can write:</p> \[\mathbb{P}(X_n \mathbf{1}_{I_{n, k}} =j) = \mathbb{P}(X_n =j\mid I_{n,k}) \mathbb{P}(I_{n, k}) = \frac{1}{n-1} \mathbb{P}(X_n = j \mid I_{n, k})\] <p>Injecting this into the equation above, we get:</p> \[\mathbb{E}[X_n \mathbf{1}_{I_{n, k}}] = \frac{1}{n-1} \sum_{j=1}^{n-1} j \mathbb{P}(X_n = j \mid I_{n, k}) = \frac{1}{n-1} \mathbb{E}[X_n \mid I_{n, k}]\] <p>Now, we need to compute the quantity \(\mathbb{E}[X_n \mid I_{n, k}]\).</p> <p>This is the expected number of free spots at the end of the parking process, given that the first car parks at spot \(k\). We can actually see the parking lane as two separate lanes, one to the left of spot \(k\) and one to the right of spot \(k+1\). The expected number of free spots on the left is \(u_{k-1}\) (there are \(k-1\) spots on the left after the first car parks), and the expected number of free spots on the right is \(u_{n-k-1}\) (there are \(n-k-1\) spots on the right after the first car parks).</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/blog_parking/img1-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/blog_parking/img1-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/blog_parking/img1-1400.webp"></source> <img src="/assets/img/blog_parking/img1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="parking animation" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Illustration of the derived formula </div> <p>Therefore, we can write:</p> \[\mathbb{E}[X_n \mid I_{n, k}] = u_{k-1} + u_{n-k-1}\] <p>So, we have:</p> \[u_n = \frac{1}{n-1} \sum_{k=1}^{n-1} \mathbb{E}[X_n \mid \mathbf{1}_{I_{n, k}}] = \frac{1}{n-1} \sum_{k=1}^{n-1} (u_{k-1} + u_{n-k-1}) = \frac{2}{n-1} \sum_{k=1}^{n-1} u_{k-1} = \frac{2}{n-1} \sum_{k=1}^{n-2} u_k\] <p>Note that the last equality comes from the fact that \(u_{0} = \mathbb{E}[X_0] = 0\), because there are no free spots when there are no parking spots.</p> <p>We can now write the recursive formula for \(u_n\):</p> \[\boxed{u_n = \frac{2}{n-1} \sum_{k=1}^{n-2} u_k}\] <p>One method to deal with such a recursive formula is to study the generating function of the sequence \(u_n\). We define the generating function as:</p> \[g(z) = \sum_{n=0}^{\infty} u_n z^n\] <p>The radius of convergence \(R\) of this series is defined as the supremum of the set of real numbers \(r\) such that the series converges for \(\left| z \right|&lt;r\). We also have:</p> \[\left| g(z) \right| \leq \sum_{n=0}^{\infty} \left|u_n\right| \left|z\right|^n \leq \sum_{n=0}^{\infty} n\left|z\right|^n\] <p>And, for \(\lvert z \rvert &lt;1\), we know that:</p> \[\sum_{n=0}^{\infty} n\left|z\right|^n = \frac{z}{(1-z)^2}\] <p>by derivation of the geometric series. So the series converges for \(\left|z\right|&lt;1\) and the radius of convergence verifies \(R \geq 1\).</p> <p>Let’s take \(z \in (-1, 1)\).</p> <p>We want to leverage the recursive formula of \(u_n\) to express \(g(z)\). Since one term \(u_k\) can be expressed as a weighted sum of the previous terms, we are motivated to use Cauchy’s product to make the sum appear in the formula. Here is one way to do it:</p> \[\begin{align*} \left(\sum_{p=0}^{\infty} z^p \right) \left( \sum_{q=0}^{\infty} u_q z^q \right) &amp;= \sum_{n=0}^{\infty} \left( \sum_{k=0}^{n} u_k \times 1 \right) z^n \\ &amp;= \sum_{n=0}^{\infty} \left( \sum_{k=0}^{n} u_k \right) z^n \\ &amp;= \sum_{n=0}^{\infty} \frac{(n+1)u_{n+2}}{2} z^n \end{align*}\] <p>This is very convenient because we know that \(\sum_{p=0}^{\infty} z^p = \frac{1}{1-z}\), so multiplying each side of the equation by \(2z^2\) and noting that \(u_0 = u_1 = 0\), we get:</p> \[\begin{align*} \frac{2z^2}{1-z} g(z) &amp;= \sum_{n=0}^{\infty} (n+1)u_{n+2} z^{n+2} \\ &amp;= \sum_{n=0}^{\infty} (n+2)u_{n+2} z^{n+2} - \sum_{n=0}^{\infty} u_{n+2} z^{n+2} \\ &amp;= \sum_{n=0}^{\infty} (n+2)u_{n+2} z^{n+2} - \sum_{n=0}^{\infty} u_{n} z^{n} \\ &amp;= z \sum_{n=0}^{\infty} (n+2)u_{n+2} z^{n+1} - g(z) \\ &amp;= z \sum_{n=0}^{\infty} (n+1)u_{n+1} z^{n} - g(z) \\ &amp;= z g'(z) - g(z) \end{align*}\] <p>This gives us a differential equation for \(g(z)\), for all \(z \in (-1, 1)\):</p> \[\boxed{zg'(z) = g(z) + \frac{2z^2}{1-z}g(z)}\] <p>Let’s try to find a candidate solution for this differential equation. Suppose that \(z &gt; 0\), then we can write:</p> \[g'(z) = (\frac{1}{z} + \frac{2z}{1-z})g(z)\] <p>We define \(f(z) = \frac{1}{z} + \frac{2z}{1-z}\), and we know that solutions have the form \(g(z) = \alpha \exp(\int f(z) dz) + \beta\)</p> <p>We can compute the integral of \(f(z)\):</p> \[\begin{align*} \int f(z) dz &amp;= \int \left(\frac{1}{z} + \frac{2z}{1-z} \right) dz \\ &amp;= \int \left(\frac{1}{z} -2 + \frac{2}{1-z} \right) dz \\ &amp;= \log(z) - 2z - 2 \log(1-z) + C \end{align*}\] <p>Therefore, the general solution of the differential equation is of the form:</p> \[g(z) = \alpha \exp(-2z) \frac{z}{(1-z)^2} + \beta\] <p>We verify that this is also solution of the equation for all \(z \in (-1, 1)\) by checking that the derivative of the function satisfies the differential equation. Also, \(\beta = g(0) = u_0 = 0\) and calculating \(g'(z)\) gives \(0 = u_1 = g'(0) = \alpha \left[ \exp(-2 \times 0) \frac{1+0}{(1-0)^3}-2\exp(-2 \times 0) \frac{0}{(1-0)^2} \right] = \alpha\).</p> <p>Therefore,</p> \[\boxed{g(z) = \exp(-2z) \frac{z}{(1-z)^2} = \sum_{n=0}^{\infty} u_n z^n}\] <p>It’s time for more Cauchy products! Remember that:</p> \[z\exp(-2z) = z\sum_{n=0}^{\infty} \frac{1}{n!}(-2z)^n = \sum_{n=0}^{\infty} \frac{1}{n!}(-2)^n z^{n+1}\] <p>and</p> \[\frac{1}{(1-z)^2} = \frac{d}{dz}\left( \frac{1}{1-z} \right) = \frac{d}{dz}\left( \sum_{n=0}^{\infty} z^n \right) = \sum_{n=0}^{\infty} (n+1)z^n\] <p>Define \(a_{n+1} = \frac{1}{n!}(-2)^n\) and \(b_n = n+1\), then we have, for \(n \geq 1\):</p> \[\begin{align*} u_n &amp;= \sum_{k=0}^{n} a_{k+1}b_{n-k-1} \\ &amp;= \sum_{k=0}^{n} \frac{1}{k!}(-2)^k (n-k) \\ &amp;= n\sum_{k=0}^{n} \frac{1}{k!}(-2)^k - \sum_{k=0}^{n} \frac{1}{(k-1)!}(-2)^k \\ &amp;= n\sum_{k=0}^{n} \frac{1}{k!}(-2)^k + 2\sum_{k=0}^{n-1} \frac{1}{k!}(-2)^k \\ &amp;= n \left( e^{-2} - \sum_{k=n+1}^{\infty} \frac{1}{k!}(-2)^k \right) + 2\left( e^{-2} - \sum_{k=n}^{\infty} \frac{1}{k!}(-2)^k \right) \\ &amp;= n \left( e^{-2} + O\left(\frac{1}{(n+1)!}\right) \right) + 2\left( e^{-2} + o\left( 1 \right) \right) \\ &amp;= (n+2)e^{-2} + O\left(\frac{1}{n!}\right) + o(1) \\ &amp;= \frac{n}{e^2} + \frac{2}{e^2} + o(1) \\ \end{align*}\] <p>Finally, we conclude that:</p> \[\boxed{u_n = \frac{n}{e^2} + \frac{2}{e^2} + o(1)}\] <p>and</p> \[\boxed{u_n \sim \frac{n}{e^2}}\] <p>Conclusion: the proportion of “wasted” spots in the parking lot tends to \(1/e^2 \approx 13.5\%\) if people park randomly. That’s why you should always be careful when parking your car! <img class="emoji" title=":wink:" alt=":wink:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f609.png" height="20" width="20"></p> <p>Feel free to leave a comment below if you have any questions or suggestions!</p> </article><div id="giscus_thread" style="max-width: 800px; margin: 0 auto;"> <script>let giscusTheme=localStorage.getItem("theme"),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"maxime7770/maxime7770.github.io","data-repo-id":"R_kgDOIsiIgQ","data-category":"General","data-category-id":"DIC_kwDOIsiIgc4CViJS","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="sticky-bottom mt-5"> <div class="container"> © Copyright 2025 Maxime Wolf </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-G9DDQ0EMK8"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-G9DDQ0EMK8");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>